# Copilot Instructions for eext-pcb-price-calculator

This project is an EasyEDA Pro extension for PCB price calculation, with a focus on offline usage and integration with the EasyEDA Pro API. The codebase is TypeScript-first, bundled for browser use, and includes a custom build and packaging workflow.

## Architecture Overview

- **src/**: Main TypeScript source. Entry point is `src/index.ts`, which registers two IFrame-based tools: PCB price calculator (`/iframe/index.html`) and a JS debugger (`/iframe/DEBUG/index.html`).
- **iframe/**: Contains the HTML/CSS/JS for the UI shown in the IFrames. `index.html` is the main calculator UI, `DEBUG/index.html` is a JS code runner/debugger.
- **build/**: Contains packaging scripts. `packaged.ts` builds a `.eext` extension package, using `.edaignore` for file filtering.
- **config/**: Esbuild configs for development and production. Output is always bundled to `dist/` as a browser IIFE.
- **locales/**: i18n files for UI and extension menus, supporting multiple languages.
- **extension.json**: Extension manifest, including menu registration and entry points.

## Key Workflows

- **Build**: `npm run build` (runs `compile` and then packages with `build/packaged.ts`). Output is in `dist/` and `build/dist/`.
- **Lint/Format**: Use `npm run fix` to run Prettier and ESLint. Pre-commit hooks auto-install and lint staged files.
- **Package**: The `.eext` file is generated by `build/packaged.ts` and is ready for import into EasyEDA Pro.
- **Localization**: Add/modify translation files in `locales/` and `locales/extensionJson/`.

## Project Conventions

- **TypeScript**: Strict mode, ESNext, browser platform, IIFE format. See `tsconfig.json` and `config/esbuild.common.ts`.
- **Imports**: Sorted by Prettier plugin. See `.prettierrc.js` for import order rules.
- **Ignore Files**: `.edaignore` controls packaging, `.gitignore` and `.prettierignore` for VCS and formatting.
- **No emails**: Do not add email addresses to `extension.json`, `README.md`, `CHANGELOG.md`, or `LICENSE` (privacy policy).
- **Trademark**: Only use EasyEDA trademarks in function descriptions and open-source release titles (see README).

## Integration Points

- **EasyEDA Pro API**: Accessed via the global `eda` object in IFrame UIs and extension code.
- **Menu Registration**: Extension menus are defined in `extension.json` under `headerMenus`.
- **IFrame Communication**: UIs in `iframe/` interact with EasyEDA via the `eda` API.

## Examples

- To add a new tool, export a function in `src/index.ts` and register it in `extension.json`.
- To add a new language, add translation files to `locales/` and update menu titles in `locales/extensionJson/`.

## References

- [EasyEDA Pro API Guide](https://prodocs.lceda.cn/cn/api/guide/)
- See `README.md` for setup and licensing details.

---

If you are unsure about a workflow or convention, check the scripts in `package.json`, the build logic in `build/packaged.ts`, and the main entry in `src/index.ts`.
